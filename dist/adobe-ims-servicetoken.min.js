/*!
 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
 @version 3.0.2
*/
import e from"murmurhash3js";const t=e.x64.hash128,n=new Map;async function s({url:e="https://ims-na1.adobelogin.com/ims/token",grant_type:s="authorization_code",client_id:o="",client_secret:r="",code:a="",jwt_token:c=""}={}){const i=t(`${e}|${o}|${s}`);let p;if(!1===n.has(i)){const t=new FormData;let d;s.length>0&&t.append("grant_type",s),t.append("client_id",o),t.append("client_secret",r),a.length>0&&t.append("code",a),c.length>0&&t.append("jwt_token",c);try{d=await fetch(e,{method:"POST",headers:{"content-type":"multipart/form-data"},body:t})}catch(e){d={ok:!1,statusText:e.message||e,json:async()=>({error:d.statusText,error_description:e.message}),text:async()=>e.message||e}}const l=d.ok?await d.clone().json():await d.clone().text();if(!d.ok){const e="string"==typeof l?d.statusText:`${l?.error}: ${l?.error_description}`;throw new Error(`[${d.status}] ${e}`)}n.set(i,l.access_token),p=structuredClone(l.access_token),void 0!==l.expires_in&&setTimeout((()=>n.delete(i)),l.expires_in)}else p=structuredClone(n.get(i));return p}export{s as token};//# sourceMappingURL=adobe-ims-servicetoken.min.js.map
